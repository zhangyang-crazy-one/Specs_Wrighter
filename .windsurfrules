# Windsurf Rules for Specify Writer

## Project Overview

Specify Writer is a comprehensive seven-stage writing workflow system supporting multiple writing types (academic papers, novels, scripts, poetry, biographies, etc.).

**Primary Rules File**: See `AGENTS.md` for complete project guidelines.

---

## Seven-Stage Workflow

1. **Research & Type Determination** - Extract information, determine writing type
2. **Style & Background Design** - Create style guide, worldview settings
3. **Constitution Creation** - Define core principles and constraints
4. **Outline & Plot Design** - Design complete plot and detailed outline
5. **Compliance Validation** - Verify outline against constitution
6. **Chapter-by-Chapter Writing** - Generate content following outline
7. **Final Review & Export** - Complete review and export to formats

---

## Commands (Cascade Agent)

Use the following commands in Windsurf Cascade:

```bash
# Initialize project
/writer:init <project-name> [project-path]

# Stage 1: Research
/writer:1-research <project-dir> [source-material] [keywords]

# Stage 2: Design
/writer:2-design <project-dir> <writing-type>

# Stage 3: Constitution
/writer:3-constitution <project-dir>

# Stage 4: Outline
/writer:4-outline <project-dir> [chapter-count]

# Stage 5: Validation
/writer:5-validate <project-dir>

# Stage 6: Draft
/writer:6-draft <project-dir> <chapter-number>

# Stage 7: Finalize
/writer:7-finalize <project-dir> [export-format]
```

---

## Code Style

### Encoding
- **All files**: UTF-8 encoding (without BOM)
- **Line endings**: LF (Unix style)

### Command Output
- **NO emoji icons** - Use text markers instead:
  - `[å®Œæˆ]` or `[PASS]` instead of âœ…
  - `[å¤±è´¥]` or `[FAIL]` instead of âŒ
  - `[æ³¨æ„]` or `[NOTE]` instead of ğŸ“
  - `[è­¦å‘Š]` or `[WARNING]` instead of âš ï¸

**Reason**: Cross-platform compatibility, JSON parsing stability, terminal display consistency

### PowerShell Scripts
- Must include `#!/usr/bin/env pwsh`
- Must use `[CmdletBinding()]`
- Must support `-Json` parameter for machine-readable output
- Must call `Set-Utf8Encoding` from common-functions.ps1
- Must use `Write-StatusMessage` for output (no emoji)

---

## Key Principles

1. **Follow the seven-stage sequence strictly** - Do not skip stages
2. **Constitution file is law** - All content must comply with constitution
3. **Validate before writing** - Stage 5 validation must pass before Stage 6
4. **UTF-8 everywhere** - All files use UTF-8 encoding (no BOM)
5. **No emoji in CLI** - Use text markers for cross-platform compatibility

---

## Windsurf-Specific Features

### Cascade Agent Integration
- Use Cascade for complex multi-step workflows
- Cascade can automatically execute the seven-stage workflow
- Cascade maintains context across stages

### Memory System
- Windsurf Cascade remembers project context
- Constitution file is stored in Cascade memory
- Validation results are tracked across sessions

### Workflows (Optional)
If you want to create Windsurf workflows, place them in:
```
.windsurf/workflows/
â”œâ”€â”€ init-project.yaml
â”œâ”€â”€ research-and-design.yaml
â”œâ”€â”€ outline-and-validate.yaml
â””â”€â”€ draft-chapters.yaml
```

---

## Project Structure

```
<ProjectName>/
â”œâ”€â”€ .writer/
â”‚   â”œâ”€â”€ config.json              # Project configuration
â”‚   â”œâ”€â”€ research/                # Stage 1: Research results
â”‚   â”œâ”€â”€ design/                  # Stage 2: Design documents
â”‚   â”œâ”€â”€ constitution/            # Stage 3: Constitution file
â”‚   â”œâ”€â”€ outline/                 # Stage 4: Outline
â”‚   â”œâ”€â”€ validation/              # Stage 5: Validation reports
â”‚   â”œâ”€â”€ drafts/                  # Stage 6: Chapter drafts
â”‚   â””â”€â”€ final/                   # Stage 7: Final documents
â”œâ”€â”€ README.md
â””â”€â”€ .gitignore
```

---

## Common Tasks

### Start a new writing project
1. Run `/writer:init "My Project"`
2. Follow the seven-stage workflow in sequence
3. Do not skip any stage

### Validate outline
1. Complete Stage 4 (outline)
2. Run `/writer:5-validate <project-dir>`
3. If validation fails, modify outline and re-validate
4. Only proceed to Stage 6 after validation passes

### Generate chapters
1. Ensure Stage 5 validation passed
2. Run `/writer:6-draft <project-dir> 1` for Chapter 1
3. Run `/writer:6-draft <project-dir> 2` for Chapter 2
4. Continue for all chapters

---

## Testing

- All PowerShell scripts must have corresponding tests
- Run tests before committing: `.\tests\Run-AllTests.ps1`
- Test scenarios: academic paper, novel, screenplay

---

## Windsurf Best Practices

### Use Cascade for Complex Workflows
```
Cascade, please help me create a new novel project:
1. Initialize the project
2. Conduct research on science fiction themes
3. Design the style and worldview
4. Create the constitution file
5. Generate a 20-chapter outline
6. Validate the outline
```

### Leverage Memory
- Cascade remembers the constitution file
- Cascade tracks which stages are completed
- Cascade can resume work across sessions

### Combine with Rules
- `.windsurfrules` provides high-level guidance
- `AGENTS.md` provides detailed specifications
- `.augment/rules/` provides stage-specific rules

---

## References

- **Complete guidelines**: `AGENTS.md`
- **Augment Code rules**: `.augment/rules/`
- **Task list**: `SEVEN_STAGE_WORKFLOW_TASKS.md`
- **User guide**: `docs/USER_GUIDE.md` (when available)

---

**Version**: v1.0  
**Last Updated**: 2025-11-02  
**Compatible with**: Windsurf Cascade, Augment Code, Cursor, Cline

