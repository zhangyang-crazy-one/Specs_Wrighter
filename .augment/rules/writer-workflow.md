---
type: always_apply
---

# ä¸ƒé˜¶æ®µå†™ä½œå·¥ä½œæµç¨‹è§„åˆ™

æœ¬è§„åˆ™æ–‡ä»¶å®šä¹‰äº†Specify Writeré¡¹ç›®çš„æ ¸å¿ƒå·¥ä½œæµç¨‹è§„èŒƒï¼Œé€‚ç”¨äºæ‰€æœ‰å†™ä½œé¡¹ç›®ã€‚

---

## æ ¸å¿ƒåŸåˆ™

### 1. ä¸¥æ ¼éµå¾ªä¸ƒé˜¶æ®µé¡ºåº

**å¿…é¡»æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ‰§è¡Œ**:
1. å†…å®¹è°ƒç ”ä¸ç±»å‹ç¡®å®š
2. é£æ ¼ä¸èƒŒæ™¯è®¾è®¡
3. åˆ›ä½œå®ªæ³•æ–‡ä»¶
4. æƒ…èŠ‚è®¾è®¡ä¸å¤§çº²ç¼–å†™
5. åˆè§„æ€§å®¡æŸ¥
6. åˆ†ç« èŠ‚ç¼–å†™
7. æœ€ç»ˆå®¡æŸ¥ä¸å¯¼å‡º

**ç¦æ­¢**:
- âŒ è·³è¿‡ä»»ä½•é˜¶æ®µ
- âŒ åœ¨å‰ä¸€é˜¶æ®µæœªå®Œæˆæ—¶è¿›å…¥ä¸‹ä¸€é˜¶æ®µ
- âŒ åœ¨éªŒè¯ä¸é€šè¿‡æ—¶ç»§ç»­ç¼–å†™å†…å®¹

### 2. é˜¶æ®µå®Œæˆæ ‡å‡†

æ¯ä¸ªé˜¶æ®µå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ‰èƒ½è¿›å…¥ä¸‹ä¸€é˜¶æ®µ:

**é˜¶æ®µä¸€å®Œæˆæ ‡å‡†**:
- [x] ç”Ÿæˆ `research-report.md`
- [x] ç¡®å®šå†™ä½œç±»å‹
- [x] æå–å…³é”®ä¿¡æ¯åˆ° `keywords.json`

**é˜¶æ®µäºŒå®Œæˆæ ‡å‡†**:
- [x] ç”Ÿæˆ `style-guide.md`
- [x] ç”Ÿæˆ `background.md`ï¼ˆå¦‚é€‚ç”¨ï¼‰
- [x] ç”Ÿæˆ `worldview.md`ï¼ˆå¦‚é€‚ç”¨ï¼‰

**é˜¶æ®µä¸‰å®Œæˆæ ‡å‡†**:
- [x] ç”Ÿæˆ `constitution.md`
- [x] åŒ…å«æ ¸å¿ƒä¸»é¢˜å’Œä»·å€¼è§‚
- [x] åŒ…å«ä¸å¯è¿èƒŒçš„åˆ›ä½œåŸåˆ™
- [x] åŒ…å«æ˜ç¡®çš„çº¦æŸæ¡ä»¶

**é˜¶æ®µå››å®Œæˆæ ‡å‡†**:
- [x] ç”Ÿæˆ `outline.md`
- [x] ç”Ÿæˆ `chapters.json`
- [x] åŒ…å«è¯¦ç»†çš„ç« èŠ‚åˆ’åˆ†
- [x] åŒ…å«æƒ…èŠ‚æ¨è¿›èŠ‚å¥

**é˜¶æ®µäº”å®Œæˆæ ‡å‡†**:
- [x] ç”Ÿæˆ `validation-report.md`
- [x] æ‰€æœ‰æ£€æŸ¥é¡¹éƒ½é€šè¿‡
- [x] å¦‚æœ‰é—®é¢˜ï¼Œå¿…é¡»è¿”å›é˜¶æ®µå››ä¿®æ”¹

**é˜¶æ®µå…­å®Œæˆæ ‡å‡†**:
- [x] æ‰€æœ‰ç« èŠ‚éƒ½å·²ç”Ÿæˆ
- [x] æ¯ç« éƒ½ç¬¦åˆå¤§çº²è¦æ±‚
- [x] æ¯ç« éƒ½ç¬¦åˆå®ªæ³•æ–‡ä»¶è¦æ±‚

**é˜¶æ®µä¸ƒå®Œæˆæ ‡å‡†**:
- [x] ç”Ÿæˆ `final-document.md`
- [x] ç”Ÿæˆ `metadata.json`
- [x] å¯¼å‡ºæŒ‡å®šæ ¼å¼æ–‡ä»¶

---

## ç¼–ç å’Œè¾“å‡ºè§„èŒƒ

### 1. æ–‡ä»¶ç¼–ç 

**å¼ºåˆ¶è¦æ±‚**:
- âœ… æ‰€æœ‰æ–‡ä»¶å¿…é¡»ä½¿ç”¨ **UTF-8 ç¼–ç ï¼ˆæ— BOMï¼‰**
- âœ… PowerShellè„šæœ¬å¿…é¡»åœ¨å¼€å¤´è°ƒç”¨ `Set-Utf8Encoding`
- âœ… æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶å¿…é¡»ä½¿ç”¨LFæ¢è¡Œç¬¦ï¼ˆUnixé£æ ¼ï¼‰

**æ£€æŸ¥æ–¹æ³•**:
```powershell
# æ£€æŸ¥æ–‡ä»¶ç¼–ç 
Get-Content -Path <file> -Encoding UTF8
```

### 2. å‘½ä»¤è¡Œè¾“å‡º

**å¼ºåˆ¶è¦æ±‚**:
- âœ… **ç¦ç”¨emojiå›¾æ ‡**
- âœ… ä½¿ç”¨çº¯æ–‡æœ¬æ›¿ä»£:
  - `[å®Œæˆ]` æˆ– `[PASS]` æ›¿ä»£ âœ…
  - `[å¤±è´¥]` æˆ– `[FAIL]` æ›¿ä»£ âŒ
  - `[æ³¨æ„]` æˆ– `[NOTE]` æ›¿ä»£ ğŸ“
  - `[è­¦å‘Š]` æˆ– `[WARNING]` æ›¿ä»£ âš ï¸

**åŸå› **:
- è·¨å¹³å°å…¼å®¹æ€§ï¼ˆWindows PowerShellç¼–ç é—®é¢˜ï¼‰
- JSONè§£æç¨³å®šæ€§ï¼ˆemojiå¯èƒ½ç ´åJSONæ ¼å¼ï¼‰
- ç»ˆç«¯æ˜¾ç¤ºä¸€è‡´æ€§ï¼ˆä¸åŒç»ˆç«¯å¯¹emojiæ”¯æŒä¸åŒï¼‰

**ç¤ºä¾‹**:
```powershell
# æ­£ç¡® âœ…
Write-Output "[å®Œæˆ] é¡¹ç›®åˆå§‹åŒ–æˆåŠŸ"
Write-Output "[æ³¨æ„] è¯·æ£€æŸ¥é…ç½®æ–‡ä»¶"

# é”™è¯¯ âŒ
Write-Output "âœ… é¡¹ç›®åˆå§‹åŒ–æˆåŠŸ"
Write-Output "ğŸ“ è¯·æ£€æŸ¥é…ç½®æ–‡ä»¶"
```

### 3. PowerShellè„šæœ¬è§„èŒƒ

**å¿…é¡»åŒ…å«**:
```powershell
#!/usr/bin/env pwsh
[CmdletBinding()]
param(
    [Parameter(Mandatory=$true)]
    [string]$ProjectDir,
    
    [switch]$Json
)

$ErrorActionPreference = 'Stop'

# å¯¼å…¥å…¬å…±å‡½æ•°
. "$PSScriptRoot/common-functions.ps1"
Set-Utf8Encoding

# ä¸»é€»è¾‘...

if ($Json) {
    Write-JsonOutput @{
        "status" = "success"
        "data" = @{ ... }
    }
} else {
    Write-StatusMessage -Type Success -Message "æ“ä½œå®Œæˆ"
}
```

**å…³é”®ç‚¹**:
- âœ… å¿…é¡»æ”¯æŒ `-Json` å‚æ•°
- âœ… å¿…é¡»è°ƒç”¨ `Set-Utf8Encoding`
- âœ… å¿…é¡»ä½¿ç”¨ `Write-StatusMessage` è¾“å‡ºçŠ¶æ€ï¼ˆç¦ç”¨emojiï¼‰
- âœ… å¿…é¡»ä½¿ç”¨ `Write-JsonOutput` è¾“å‡ºJSON

---

## å‰ç½®æ¡ä»¶æ£€æŸ¥

### 1. é¡¹ç›®åˆå§‹åŒ–æ£€æŸ¥

åœ¨æ‰§è¡Œä»»ä½•é˜¶æ®µå‘½ä»¤å‰ï¼Œå¿…é¡»æ£€æŸ¥:
```powershell
# æ£€æŸ¥é¡¹ç›®æ˜¯å¦å·²åˆå§‹åŒ–
if (-not (Test-Path "$ProjectDir/.writer/config.json")) {
    Write-StatusMessage -Type Error -Message "é¡¹ç›®æœªåˆå§‹åŒ–ï¼Œè¯·å…ˆè¿è¡Œ /writer:init"
    exit 1
}
```

### 2. é˜¶æ®µä¾èµ–æ£€æŸ¥

æ¯ä¸ªé˜¶æ®µå¿…é¡»æ£€æŸ¥å‰ç½®é˜¶æ®µæ˜¯å¦å®Œæˆ:

**é˜¶æ®µäºŒæ£€æŸ¥**:
```powershell
# æ£€æŸ¥é˜¶æ®µä¸€æ˜¯å¦å®Œæˆ
if (-not (Test-Path "$ProjectDir/.writer/research/research-report.md")) {
    Write-StatusMessage -Type Error -Message "é˜¶æ®µä¸€æœªå®Œæˆï¼Œè¯·å…ˆè¿è¡Œ /writer:1-research"
    exit 1
}
```

**é˜¶æ®µä¸‰æ£€æŸ¥**:
```powershell
# æ£€æŸ¥é˜¶æ®µäºŒæ˜¯å¦å®Œæˆ
if (-not (Test-Path "$ProjectDir/.writer/design/style-guide.md")) {
    Write-StatusMessage -Type Error -Message "é˜¶æ®µäºŒæœªå®Œæˆï¼Œè¯·å…ˆè¿è¡Œ /writer:2-design"
    exit 1
}
```

**é˜¶æ®µå››æ£€æŸ¥**:
```powershell
# æ£€æŸ¥é˜¶æ®µä¸‰æ˜¯å¦å®Œæˆ
if (-not (Test-Path "$ProjectDir/.writer/constitution/constitution.md")) {
    Write-StatusMessage -Type Error -Message "é˜¶æ®µä¸‰æœªå®Œæˆï¼Œè¯·å…ˆè¿è¡Œ /writer:3-constitution"
    exit 1
}
```

**é˜¶æ®µäº”æ£€æŸ¥**:
```powershell
# æ£€æŸ¥é˜¶æ®µå››æ˜¯å¦å®Œæˆ
if (-not (Test-Path "$ProjectDir/.writer/outline/outline.md")) {
    Write-StatusMessage -Type Error -Message "é˜¶æ®µå››æœªå®Œæˆï¼Œè¯·å…ˆè¿è¡Œ /writer:4-outline"
    exit 1
}
```

**é˜¶æ®µå…­æ£€æŸ¥**:
```powershell
# æ£€æŸ¥é˜¶æ®µäº”æ˜¯å¦é€šè¿‡
$validationReport = Get-Content "$ProjectDir/.writer/validation/validation-report.md" -Raw
if ($validationReport -notmatch "çŠ¶æ€: é€šè¿‡") {
    Write-StatusMessage -Type Error -Message "é˜¶æ®µäº”éªŒè¯æœªé€šè¿‡ï¼Œè¯·å…ˆä¿®æ”¹å¤§çº²"
    exit 1
}
```

**é˜¶æ®µä¸ƒæ£€æŸ¥**:
```powershell
# æ£€æŸ¥æ‰€æœ‰ç« èŠ‚æ˜¯å¦å®Œæˆ
$config = Get-Content "$ProjectDir/.writer/config.json" | ConvertFrom-Json
$chapterCount = $config.chapterCount
$completedChapters = (Get-ChildItem "$ProjectDir/.writer/drafts/chapter-*.md").Count

if ($completedChapters -lt $chapterCount) {
    Write-StatusMessage -Type Error -Message "è¿˜æœ‰ $($chapterCount - $completedChapters) ç« æœªå®Œæˆ"
    exit 1
}
```

---

## é”™è¯¯å¤„ç†

### 1. ç»Ÿä¸€é”™è¯¯æ ¼å¼

**JSONæ¨¡å¼**:
```json
{
  "status": "error",
  "error": {
    "code": "ERROR_CODE",
    "message": "é”™è¯¯æè¿°",
    "details": "è¯¦ç»†ä¿¡æ¯"
  }
}
```

**æ–‡æœ¬æ¨¡å¼**:
```
[å¤±è´¥] é”™è¯¯æè¿°
è¯¦ç»†ä¿¡æ¯...
```

### 2. å¸¸è§é”™è¯¯ä»£ç 

| é”™è¯¯ä»£ç  | æè¿° | å¤„ç†æ–¹å¼ |
|---------|------|---------|
| `PROJECT_NOT_INITIALIZED` | é¡¹ç›®æœªåˆå§‹åŒ– | è¿è¡Œ `/writer:init` |
| `STAGE_NOT_COMPLETED` | å‰ç½®é˜¶æ®µæœªå®Œæˆ | å®Œæˆå‰ç½®é˜¶æ®µ |
| `VALIDATION_FAILED` | éªŒè¯æœªé€šè¿‡ | ä¿®æ”¹å¤§çº²åé‡æ–°éªŒè¯ |
| `FILE_NOT_FOUND` | æ–‡ä»¶ä¸å­˜åœ¨ | æ£€æŸ¥æ–‡ä»¶è·¯å¾„ |
| `INVALID_PARAMETER` | å‚æ•°æ— æ•ˆ | æ£€æŸ¥å‚æ•°æ ¼å¼ |

---

## é…ç½®æ–‡ä»¶ç®¡ç†

### 1. config.jsonç»“æ„

```json
{
  "projectName": "é¡¹ç›®åç§°",
  "writingType": "å†™ä½œç±»å‹",
  "createdAt": "2025-11-02T10:00:00Z",
  "currentStage": 1,
  "chapterCount": 20,
  "stages": {
    "1": { "completed": true, "completedAt": "2025-11-02T11:00:00Z" },
    "2": { "completed": true, "completedAt": "2025-11-02T12:00:00Z" },
    "3": { "completed": false },
    "4": { "completed": false },
    "5": { "completed": false },
    "6": { "completed": false },
    "7": { "completed": false }
  }
}
```

### 2. æ›´æ–°é…ç½®

æ¯ä¸ªé˜¶æ®µå®Œæˆåå¿…é¡»æ›´æ–°é…ç½®:
```powershell
$config = Get-ProjectConfig -ProjectDir $ProjectDir
$config.stages."1".completed = $true
$config.stages."1".completedAt = (Get-Date).ToUniversalTime().ToString("o")
$config.currentStage = 2
Set-ProjectConfig -ProjectDir $ProjectDir -Config $config
```

---

## æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬æ§åˆ¶

- æ¯ä¸ªé˜¶æ®µå®Œæˆåæäº¤Git
- ä½¿ç”¨æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯
- é‡è¦ä¿®æ”¹å‰åˆ›å»ºåˆ†æ”¯

### 2. å¤‡ä»½ç­–ç•¥

- å®šæœŸå¤‡ä»½ `.writer/` ç›®å½•
- ç‰¹åˆ«å¤‡ä»½å®ªæ³•æ–‡ä»¶å’Œå¤§çº²æ–‡ä»¶
- ä½¿ç”¨äº‘å­˜å‚¨æˆ–å¤–éƒ¨ç¡¬ç›˜

### 3. æ–‡æ¡£ç»´æŠ¤

- ä¿æŒREADME.mdæ›´æ–°
- è®°å½•é‡è¦å†³ç­–
- æ›´æ–°å˜æ›´æ—¥å¿—

### 4. ä»£ç å®¡æŸ¥

- æäº¤å‰è¿è¡Œæ‰€æœ‰æµ‹è¯•
- æ£€æŸ¥ç¼–ç è§„èŒƒ
- éªŒè¯JSONè¾“å‡ºæ ¼å¼

---

## ç¦æ­¢äº‹é¡¹

### ç»å¯¹ç¦æ­¢

- âŒ è·³è¿‡é˜¶æ®µ
- âŒ ä½¿ç”¨emojiè¾“å‡º
- âŒ ä½¿ç”¨éUTF-8ç¼–ç 
- âŒ ä¸æ”¯æŒ`-Json`å‚æ•°
- âŒ åœ¨éªŒè¯ä¸é€šè¿‡æ—¶ç»§ç»­
- âŒ ä¿®æ”¹å®ªæ³•æ–‡ä»¶ï¼ˆé™¤éé‡æ–°å¼€å§‹ï¼‰
- âŒ æ‰‹åŠ¨ç¼–è¾‘config.jsonï¼ˆä½¿ç”¨è„šæœ¬ï¼‰

### å¼ºçƒˆä¸å»ºè®®

- âš ï¸ åŒæ—¶ç¼–å†™å¤šä¸ªç« èŠ‚ï¼ˆå¯èƒ½å¯¼è‡´é£æ ¼ä¸ä¸€è‡´ï¼‰
- âš ï¸ é¢‘ç¹ä¿®æ”¹å¤§çº²ï¼ˆå½±å“å·²å®Œæˆç« èŠ‚ï¼‰
- âš ï¸ å¿½ç•¥éªŒè¯æŠ¥å‘Šçš„è­¦å‘Š
- âš ï¸ ä¸å¤‡ä»½é‡è¦æ–‡ä»¶

---

## æ•…éšœæ’é™¤

### é—®é¢˜1: ç¼–ç é”™è¯¯

**ç—‡çŠ¶**: PowerShellè„šæœ¬è¾“å‡ºä¹±ç 

**è§£å†³**:
```powershell
# åœ¨è„šæœ¬å¼€å¤´æ·»åŠ 
. "$PSScriptRoot/common-functions.ps1"
Set-Utf8Encoding
```

### é—®é¢˜2: JSONè§£æå¤±è´¥

**ç—‡çŠ¶**: å‘½ä»¤æ— æ³•è§£æè„šæœ¬è¾“å‡º

**è§£å†³**:
- æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†emoji
- æ£€æŸ¥JSONæ ¼å¼æ˜¯å¦æ­£ç¡®
- ä½¿ç”¨ `Write-JsonOutput` å‡½æ•°

### é—®é¢˜3: å‰ç½®æ£€æŸ¥å¤±è´¥

**ç—‡çŠ¶**: æç¤ºå‰ç½®é˜¶æ®µæœªå®Œæˆ

**è§£å†³**:
- æ£€æŸ¥ `.writer/` ç›®å½•ç»“æ„
- æ£€æŸ¥ `config.json` ä¸­çš„é˜¶æ®µçŠ¶æ€
- æŒ‰é¡ºåºå®Œæˆæ‰€æœ‰é˜¶æ®µ

---

**è§„åˆ™ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-02  
**é€‚ç”¨èŒƒå›´**: æ‰€æœ‰Specify Writeré¡¹ç›®

