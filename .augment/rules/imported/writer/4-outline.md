---
type: "manual"
---

# 阶段四：情节设计与大纲编写

## 命令说明

此命令用于执行阶段四的大纲编写工作，基于宪法文件设计完整情节和详细章节大纲。

## 用法

```bash
/writer:4-outline <project-dir> [chapter-count]
```

### 参数

- `<project-dir>` (必需): 项目目录路径
- `[chapter-count]` (可选): 章节数量，默认为10

### 示例

```bash
# 使用默认章节数（10章）
/writer:4-outline "D:\Projects\MyNovel"

# 指定章节数
/writer:4-outline "D:\Projects\MyNovel" 20

# 短篇小说（5章）
/writer:4-outline "D:\Projects\ShortStory" 5
```

## 前置条件

- 阶段一必须已完成（调研报告）
- 阶段二必须已完成（设计文档）
- 阶段三必须已完成（宪法文件）
- `.writer/constitution/constitution.md` 必须存在

## 执行步骤

1. **检查前置条件**
   - 验证阶段一、二、三已完成
   - 读取调研数据

2. **生成大纲文档**
   - 根据章节数量生成大纲模板
   - 自动计算三幕结构划分
   - 为每个章节生成详细模板

3. **保存文件**
   - 大纲文档: `.writer/outline/outline.md`

4. **更新配置**
   - 更新 `config.json` 中的章节数量
   - 更新阶段四状态
   - 设置当前阶段为4

## 调用PowerShell脚本

```powershell
$scriptPath = "scripts/powershell/create-outline.ps1"
& $scriptPath -ProjectDir "<project-dir>" -ChapterCount [chapter-count]
```

## 输出

### 成功输出

```
[完成] 大纲已生成

项目信息:
  名称: 我的小说
  类型: 长篇小说
  章节数: 20
  大纲路径: D:\Projects\MyNovel\.writer\outline\outline.md

下一步行动:
  1. 打开大纲文档: D:\Projects\MyNovel\.writer\outline\outline.md
  2. 填写每个章节的详细信息
  3. 确保情节符合宪法文件要求
  4. 设计伏笔和回收计划
  5. 完成后运行: /writer:5-validate "D:\Projects\MyNovel"

[注意] 请完成大纲后再进入阶段五：合规性审查
```

## 大纲文档结构

生成的大纲文档包含以下部分：

### 1. 大纲概述
- **整体结构**: 总章节数、预计总字数、故事时间跨度
- **三幕结构**: 自动计算第一幕、第二幕、第三幕的章节范围

### 2. 章节大纲

每个章节包含以下信息：

```markdown
### 第X章: [章节标题]

**字数**: [预计字数]
**时间**: [故事时间]
**地点**: [主要地点]
**POV**: [视角角色]

**章节摘要**:
[简要描述本章的主要内容]

**关键事件**:
1. [事件1]
2. [事件2]
3. [事件3]

**角色发展**:
- [角色1]: [发展描述]
- [角色2]: [发展描述]

**伏笔**:
- [伏笔1]: [描述]

**回收伏笔**:
- [回收的伏笔]: [来自第X章]

**与宪法文件的关联**:
- **核心主题**: [相关主题]
- **遵守的原则**: [相关原则]
```

## 填写指南

### 必填项

每个章节必须填写：
- **章节标题**: 简洁明确的标题
- **章节摘要**: 100-200字的摘要
- **关键事件**: 至少2-3个关键事件
- **与宪法文件的关联**: 明确与核心主题的关联

### 建议填写

- **字数**: 有助于控制章节长度
- **时间**: 有助于保持时间线一致
- **地点**: 有助于场景设计
- **POV**: 如果使用多视角，必须填写

### 重要事项

1. **符合宪法文件**: 每个章节都必须符合宪法文件的要求
2. **情节连贯**: 章节之间的情节必须连贯
3. **伏笔设计**: 提前设计伏笔和回收计划
4. **节奏控制**: 注意整体节奏，避免平铺直叙

## 三幕结构建议

### 第一幕（开端）- 约25%
- 介绍主要角色
- 建立世界观
- 引入核心冲突
- 设置故事基调

### 第二幕（发展）- 约50%
- 冲突逐步升级
- 角色成长和转变
- 情节复杂化
- 中点转折

### 第三幕（结局）- 约25%
- 高潮冲突
- 解决核心问题
- 角色命运
- 收尾和余韵

## 下一步

完成大纲后，运行以下命令进入阶段五：

```bash
/writer:5-validate "<project-dir>"
```

## 注意事项

1. **基于宪法文件**: 大纲必须严格遵守宪法文件的所有要求
2. **详细具体**: 大纲越详细，后续编写越顺利
3. **伏笔规划**: 提前规划所有伏笔的埋设和回收
4. **时间线**: 确保时间线清晰、连贯

## 章节数量建议

- **短篇小说**: 3-5章
- **中篇小说**: 10-15章
- **长篇小说**: 20-50章
- **学术论文**: 5-8章
- **剧本**: 根据幕数和场次确定

## 相关命令

- `/writer:3-constitution` - 返回阶段三
- `/writer:5-validate` - 进入阶段五：合规性审查

## 技术细节

- **脚本位置**: `scripts/powershell/create-outline.ps1`
- **输出目录**: `.writer/outline/`
- **编码**: UTF-8（无BOM）

